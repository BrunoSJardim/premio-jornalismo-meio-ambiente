<!-- templates/trabalhos/enviar_trabalho.html -->

{% extends 'trabalhos/base.html' %}

{% block title %}Inscrição{% endblock %}

{% block page_header %}
<div class="page-header">
    <div class="container">
        <h1>Fazer inscrição</h1>
    </div>
</div>
{% endblock %}

{% block content %}
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.non_field_errors }}

    <!-- Mostrar erros de campo -->
    {% for field in form %}
    {% for error in field.errors %}
    <div class="alert alert-danger">
        <strong>{{ field.label }}:</strong> {{ error }}
    </div>
    {% endfor %}
    {% endfor %}

    <div class="accordion" id="formAccordion">

        <!-- Dados Pessoais -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingPessoais">
                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapsePessoais">
                    Dados Pessoais
                </button>
            </h2>
            <div id="collapsePessoais" class="accordion-collapse collapse show">
                <div class="accordion-body">
                    <div class="mb-3">{{ form.nome_completo.label_tag }} {{ form.nome_completo }}</div>
                    <div class="mb-3">{{ form.data_nascimento.label_tag }} {{ form.data_nascimento }}</div>
                    <div class="mb-3">{{ form.cpf.label_tag }} {{ form.cpf }}</div>
                    <div class="mb-3">{{ form.email.label_tag }} {{ form.email }}</div>
                    <div class="mb-3">{{ form.telefone.label_tag }} {{ form.telefone }}</div>
                </div>
            </div>
        </div>

        <!-- Dados Bancários -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingBancarios">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseBancarios">
                    Dados Bancários
                </button>
            </h2>
            <div id="collapseBancarios" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <div class="mb-3">{{ form.banco.label_tag }} {{ form.banco }}</div>
                    <div class="mb-3">{{ form.agencia.label_tag }} {{ form.agencia }}</div>
                    <div class="mb-3">{{ form.conta_corrente.label_tag }} {{ form.conta_corrente }}</div>
                    <div class="mb-3">{{ form.tipo_chave_pix.label_tag }} {{ form.tipo_chave_pix }}</div>
                    <div class="mb-3">{{ form.chave_pix.label_tag }} {{ form.chave_pix }}</div>
                    <div class="mb-3">{{ form.comprovante_bancario.label_tag }} {{ form.comprovante_bancario }}</div>
                </div>
            </div>
        </div>

        <!-- Dados Profissionais -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingProfissionais">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseProfissionais">
                    Dados Profissionais
                </button>
            </h2>
            <div id="collapseProfissionais" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <div class="mb-3">{{ form.registro_profissional.label_tag }} {{ form.registro_profissional }}</div>
                    <div class="mb-3">{{ form.veiculo_universidade.label_tag }} {{ form.veiculo_universidade }}</div>
                </div>
            </div>
        </div>

        <!-- Inscrição -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingInscricao">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseInscricao">
                    Inscrição
                </button>
            </h2>
            <div id="collapseInscricao" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <div class="mb-3">{{ form.categoria.label_tag }} {{ form.categoria }}</div>
                    <div class="mb-3">{{ form.microtema.label_tag }} {{ form.microtema }}</div>
                    <div class="mb-3">{{ form.titulo.label_tag }} {{ form.titulo }}</div>
                    <div class="mb-3">{{ form.descricao.label_tag }} {{ form.descricao }}</div>
                    <div class="mb-3">{{ form.link_trabalho.label_tag }} {{ form.link_trabalho }}</div>
                    <div class="mb-3">{{ form.arquivo_trabalho.label_tag }} {{ form.arquivo_trabalho }}</div>
                </div>
            </div>
        </div>

        <!-- Termo -->
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTermo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTermo">
                    Termo de Consentimento para Tratamento de Dados Pessoais
                </button>
            </h2>
            <div id="collapseTermo" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <div class="border p-3 bg-light mb-3" style="max-height: 300px; overflow-y: auto;">
                        <p>Ao realizar minha inscrição no Prêmio SEMA-FEPAM... [trecho completo do termo aqui]</p>
                    </div>
                    <div class="form-check">
                        {{ form.aceite_termo }}
                        <label class="form-check-label" for="{{ form.aceite_termo.id_for_label }}">
                            {{ form.aceite_termo.label }}
                        </label>
                        {% if form.aceite_termo.errors %}
                        <div class="text-danger">{{ form.aceite_termo.errors }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="mt-4">
        <button type="submit" class="btn btn-success">Enviar</button>
    </div>
</form>
{% endblock %}